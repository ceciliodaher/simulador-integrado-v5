<!doctype html>
<html lang="pt-BR">
	<!-- SUBSTITUIR o t√≠tulo e meta tags -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CapitalFlow Pro - Intelig√™ncia em Capital de Giro</title>
    <meta name="description" content="Simule o impacto da Reforma Tribut√°ria no seu capital de giro e descubra estrat√©gias de mitiga√ß√£o inteligentes">
    <meta name="keywords" content="capital de giro, split payment, reforma tribut√°ria, IVA, simulador">
    
    <!-- Favicon -->
	<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' fill='none'><circle cx='50' cy='50' r='45' fill='%232c5aa0' stroke='%231e3d72' stroke-width='2'/><path d='M25 35 L35 25 L35 30 L45 30 L45 40 L35 40 L35 45 Z' fill='%234CAF50'/><path d='M75 65 L65 75 L65 70 L55 70 L55 60 L65 60 L65 55 Z' fill='%234CAF50'/><text x='50' y='58' font-family='Arial, sans-serif' font-size='24' font-weight='bold' text-anchor='middle' fill='white'>$</text><path d='M30 50 Q50 30 70 50' stroke='%234CAF50' stroke-width='2' fill='none' opacity='0.8'/></svg>">
		<!-- Bibliotecas externas -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

		<!-- Arquivos CSS pr√≥prios -->
		<link rel="stylesheet" href="css/main.css" />
		<link rel="stylesheet" href="css/tabs.css" />
		<link rel="stylesheet" href="css/forms.css" />
		<link rel="stylesheet" href="css/charts.css" />
		<link rel="stylesheet" href="css/modals.css" />
		<link rel="stylesheet" href="css/importacao.css" />
	
		<!-- Fonte moderna -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
	
	</head>
	<body>
		<div id="cache-alert" class="cache-alert-overlay">
			<div class="cache-alert-box">
				<div class="cache-alert-header">
					<h3>‚ö†Ô∏è Aten√ß√£o: Limpe o Cache do Navegador</h3>
					<span id="close-cache-alert" class="close-alert">&times;</span>
				</div>
				<div class="cache-alert-content">
					<p>
						Para garantir o funcionamento correto do simulador, recomendamos
						<strong>limpar o cache do seu navegador</strong> antes de iniciar.
					</p>

					<div class="shortcut-container">
						<div class="shortcut-item">
							<div class="shortcut-os">Windows</div>
							<div class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>F5</kbd></div>
							<div class="shortcut-alt">ou</div>
							<div class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>R</kbd></div>
						</div>
						<div class="shortcut-item">
							<div class="shortcut-os">Mac</div>
							<div class="shortcut-keys"><kbd>‚åò Cmd</kbd> + <kbd>Shift</kbd> + <kbd>R</kbd></div>
						</div>
						<div class="shortcut-item">
							<div class="shortcut-os">Linux/Unix</div>
							<div class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>R</kbd></div>
						</div>
					</div>

					<p class="cache-alert-note">
						Se o simulador apresentar comportamento inesperado ap√≥s atualiza√ß√£o, repita o processo de
						limpeza de cache. Aguarde o carregamento completo do sistema.
					</p>

					<button id="proceed-button" class="proceed-btn">Entendi, Prosseguir</button>
				</div>
			</div>
		</div>
		<div class="beta-banner">VERS√ÉO BETA - APENAS PARA TESTES</div>
		<div class="container">
			<!-- SUBSTITUIR o header -->
			<!-- ===== HEADER MODERNIZADO ===== -->
			<header class="main-header">
			<div class="header-content">
				<div class="logo-section">
					<div class="logo-icon">üí∞</div>
					<div class="logo-text">
						<img src="imagens/expertzy-it.png" alt="Expertzy Intelig√™ncia Tribut√°ria" class="logo" />
						<h1>CapitalFlow Pro</h1>
						<p class="tagline">Intelig√™ncia em Capital de Giro com IA</p>
					</div>
				</div>
				<div class="header-actions">
					<div class="powered-by">
						<span>Powered by</span>
						<strong>Expertzy IT</strong>
					</div>
				</div>
			</div>
			</header>
		</div>

			<!-- ===== SISTEMA DE ABAS MODERNIZADO ===== -->
			<div class="tab-container">
				<div class="tab-buttons">
					<button class="tab-button active" data-tab="simulacao" data-tooltip="Configure e execute simula√ß√µes de impacto">
						üìä Simula√ß√£o
					</button>
					<button class="tab-button" data-tab="configuracoes" data-tooltip="Ajuste par√¢metros do sistema">
						‚öôÔ∏è Configura√ß√µes
					</button>
					<button class="tab-button" data-tab="estrategias" data-tooltip="Explore estrat√©gias de mitiga√ß√£o">
						üéØ Estrat√©gias de Mitiga√ß√£o
					</button>
					<button class="tab-button" data-tab="memoria" data-tooltip="Visualize c√°lculos detalhados">
						üßÆ Mem√≥ria de C√°lculo
					</button>
					<button class="tab-button" data-tab="ajuda" data-tooltip="Documenta√ß√£o e suporte">
						‚ùì Ajuda e Documenta√ß√£o
					</button>
					<button class="tab-button" data-tab="importacao-sped" data-tooltip="Importe dados do SPED">
						üì• Importa√ß√£o SPED
					</button>
				</div>

				<!-- ===== ABA DE SIMULA√á√ÉO MODERNIZADA ===== -->
				<div id="simulacao" class="tab-content active">
					<div class="simulation-container">
						<!-- Container das duas colunas de entrada -->
						<div class="input-columns-container">
							<!-- COLUNA ESQUERDA -->
							<div class="input-column-left">
								<!-- 1. Dados da Empresa -->
								<div class="group-box" data-icon="üè¢">
									<h3>Dados da Empresa</h3>
									<div class="form-group">
										<label for="empresa">Nome da Empresa:</label>
										<input type="text" id="empresa" placeholder="Digite o nome da empresa" data-tooltip="Nome completo ou raz√£o social da empresa" />
									</div>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="faturamento">Faturamento Mensal:</label>
												<input type="text" id="faturamento" value="0" class="money-input" data-tooltip="Faturamento bruto mensal em R$" />
											</div>
										</div>
										<div class="form-column">
											<div class="form-group">
												<label for="margem">Margem Operacional (%):</label>
												<input type="number" id="margem" value="15" min="0" max="100" step="0.1" data-tooltip="Margem operacional atual da empresa" />
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="tipo-empresa">Tipo de Empresa:</label>
												<select id="tipo-empresa" name="tipo-empresa" data-tooltip="Selecione o segmento de atua√ß√£o">
													<option value="">Selecione o tipo...</option>
													<option value="comercio">üõí Com√©rcio</option>
													<option value="industria">üè≠ Ind√∫stria</option>
													<option value="servicos">üíº Servi√ßos</option>
												</select>
											</div>
										</div>
										<div class="form-column">
											<div class="form-group">
												<label for="tipo-operacao">Tipo de Opera√ß√£o:</label>
												<select id="tipo-operacao" onchange="ajustarCamposOperacao()" data-tooltip="Defina o modelo de neg√≥cio predominante">
													<option value="">Selecione o tipo de opera√ß√£o...</option>
													<option value="b2b">üè¢ B2B (Empresa-Empresa)</option>
													<option value="b2c">üë• B2C (Empresa-Consumidor)</option>
													<option value="mista">üîÑ Mista</option>
												</select>
											</div>
										</div>
									</div>
								</div>

								<!-- 2. Ciclo Financeiro -->
								<div class="group-box" data-icon="üîÑ">
									<h3>Ciclo Financeiro</h3>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="pmr">Prazo M√©dio de Recebimento (dias):</label>
												<input type="number" id="pmr" value="30" min="0" step="1" data-tooltip="Tempo m√©dio para receber vendas a prazo" />
											</div>
										</div>
										<div class="form-column">
											<div class="form-group">
												<label for="pmp">Prazo M√©dio de Pagamento (dias):</label>
												<input type="number" id="pmp" value="30" min="0" step="1" data-tooltip="Tempo m√©dio para pagar fornecedores" />
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="pme">Prazo M√©dio de Estoque (dias):</label>
												<input type="number" id="pme" value="30" min="0" step="1" data-tooltip="Tempo m√©dio de perman√™ncia do estoque" />
											</div>
										</div>
										<div class="form-column">
											<div class="form-group">
												<label for="ciclo-financeiro">Ciclo Financeiro (dias):</label>
												<input type="number" id="ciclo-financeiro" value="30" readonly data-tooltip="Calculado automaticamente: PMR + PME - PMP" />
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="perc-vista">Percentual de Vendas √† Vista (%):</label>
												<input type="number" id="perc-vista" value="30" min="0" max="100" step="1" data-tooltip="Percentual de vendas recebidas √† vista" />
											</div>
										</div>
										<div class="form-column">
											<div class="form-group">
												<label for="perc-prazo">Percentual de Vendas a Prazo (%):</label>
												<input type="text" id="perc-prazo" value="70%" readonly data-tooltip="Calculado automaticamente: 100% - vendas √† vista" />
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group checkbox-group">
												<input type="checkbox" id="considerar-split" name="considerar-split" checked />
												<label for="considerar-split">Considerar Split Payment no c√°lculo</label>
												<span class="tooltip" data-tooltip="Se desabilitado, simula apenas a transi√ß√£o para o IVA Dual sem Split Payment">
													<i class="info-icon">‚ÑπÔ∏è</i>
												</span>
											</div>
										</div>
									</div>
								</div>

									<!-- Campos opcionais para exibir a NCG (inicialmente ocultos) -->
									<div id="campos-ncg" style="display: none" class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="ncg-atual">NCG Atual:</label>
												<input type="text" id="ncg-atual" readonly />
											</div>
										</div>
										<div class="form-column">
											<div class="form-group">
												<label for="ncg-ajustada">NCG com Split Payment:</label>
												<input type="text" id="ncg-ajustada" readonly />
											</div>
										</div>
										<div class="form-column">
											<div class="form-group">
												<label for="diferenca-ncg">Impacto no Capital de Giro:</label>
												<input type="text" id="diferenca-ncg" readonly class="impact-field" />
											</div>
										</div>
									</div>

								<!-- 3. Sistema Tribut√°rio Atual -->
								<div class="group-box" data-icon="üèõÔ∏è">
									<h3>Sistema Tribut√°rio Atual</h3>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="regime">Regime Tribut√°rio:</label>
												<select id="regime" onchange="ajustarCamposTributarios()" data-tooltip="Selecione o regime tribut√°rio atual da empresa">
													<option value="">Selecione o regime tribut√°rio...</option>
													<option value="simples">üìã Simples Nacional</option>
													<option value="presumido">üìä Lucro Presumido</option>
													<option value="real">üìà Lucro Real</option>
												</select>
											</div>

											<!-- Campos espec√≠ficos para Simples Nacional -->
											<div id="campos-simples" class="campos-regime" style="display: none">
												<div class="form-row">
													<div class="form-column">
														<div class="form-group">
															<label for="aliquota-simples"
																>Al√≠quota Simples Nacional (%):</label
															>
															<input
																type="number"
																id="aliquota-simples"
																name="aliquota-simples"
																value="6.0"
																min="0"
																max="30"
																step="0.01" />
														</div>
													</div>
												</div>
											</div>

											<!-- Campos para Lucro Presumido e Real -->
											<div id="campos-lucro" class="campos-regime" style="display: none">
												<!-- PIS/COFINS -->
												<div class="form-row">
													<div class="form-column">
														<div class="form-group">
															<label for="pis-cofins-regime">Regime PIS/COFINS:</label>
															<select
																id="pis-cofins-regime"
																onchange="ajustarAliquotasPisCofins()">
																<option value="cumulativo">Cumulativo</option>
																<option value="nao-cumulativo">N√£o-Cumulativo</option>
															</select>
														</div>
													</div>

													<div id="campos-pis-cofins-creditos" style="display: none">
														<div class="form-row">
															<div class="form-column">
																<div class="form-group">
																	<label for="pis-aliquota">Al√≠quota PIS (%):</label>
																	<input
																		type="number"
																		id="pis-aliquota"
																		value="1.65"
																		min="0"
																		max="10"
																		step="0.01"
																		readonly />
																</div>
															</div>
															<div class="form-column">
																<div class="form-group">
																	<label for="cofins-aliquota"
																		>Al√≠quota COFINS (%):</label
																	>
																	<input
																		type="number"
																		id="cofins-aliquota"
																		value="7.6"
																		min="0"
																		max="20"
																		step="0.01"
																		readonly />
																</div>
															</div>
														</div>
													</div>

													<div class="form-row">
														<div class="form-column">
															<div class="form-group">
																<label for="pis-cofins-base-calc"
																	>Base de C√°lculo (% do faturamento):</label
																>
																<input
																	type="number"
																	id="pis-cofins-base-calc"
																	value="50"
																	min="0"
																	max="100"
																	step="0.1" />
																<small class="text-muted"
																	>Percentual de aquisi√ß√µes com direito a
																	cr√©dito</small
																>
															</div>
														</div>
														<div class="form-column">
															<div class="form-group">
																<label for="pis-cofins-perc-credito"
																	>Percentual de Aproveitamento (%):</label
																>
																<input
																	type="number"
																	id="pis-cofins-perc-credito"
																	value="100"
																	min="0"
																	max="100"
																	step="0.1" />
																<small class="text-muted"
																	>Percentual efetivamente aproveitado</small
																>
															</div>
														</div>
													</div>

													<div class="form-row">
														<div class="form-column">
															<div class="form-group">
																<label for="creditos-pis-cofins-calc"
																	>Cr√©ditos PIS/COFINS Calculados:</label
																>
																<input
																	type="text"
																	id="creditos-pis-cofins-calc"
																	class="money-input"
																	readonly />
																<small class="text-muted"
																	>Calculado automaticamente</small
																>
															</div>
														</div>
													</div>
												</div>

												<!-- ICMS para empresas comerciais/industriais -->
												<div id="campos-icms" class="campos-operacao">
													<div class="form-row">
														<div class="form-column">
															<div class="form-group">
																<label for="aliquota-icms">Al√≠quota ICMS (%):</label>
																<input
																	type="number"
																	id="aliquota-icms"
																	value="18.0"
																	min="0"
																	max="30"
																	step="0.01" />
															</div>
														</div>
													</div>

													<div class="form-row">
														<div class="form-column">
															<div class="form-group">
																<label for="icms-base-calc"
																	>Base de C√°lculo (% do faturamento):</label
																>
																<input
																	type="number"
																	id="icms-base-calc"
																	value="60"
																	min="0"
																	max="100"
																	step="0.1" />
																<small class="text-muted"
																	>Percentual de aquisi√ß√µes com ICMS</small
																>
															</div>
														</div>
														<div class="form-column">
															<div class="form-group">
																<label for="icms-perc-credito"
																	>Percentual de Aproveitamento (%):</label
																>
																<input
																	type="number"
																	id="icms-perc-credito"
																	value="100"
																	min="0"
																	max="100"
																	step="0.1" />
																<small class="text-muted"
																	>Percentual efetivamente aproveitado</small
																>
															</div>
														</div>
													</div>

													<div class="form-row">
														<div class="form-column">
															<div class="form-group">
																<label for="creditos-icms-calc"
																	>Cr√©ditos ICMS Calculados:</label
																>
																<input
																	type="text"
																	id="creditos-icms-calc"
																	class="money-input"
																	readonly />
																<small class="text-muted"
																	>Calculado automaticamente</small
																>
															</div>
														</div>
													</div>

													<div class="form-row">
														<div class="form-column">
															<div class="form-group checkbox-group">
																<input
																	type="checkbox"
																	id="possui-incentivo-icms"
																	onchange="toggleCamposIncentivoICMS()" />
																<label for="possui-incentivo-icms"
																	>Possui Incentivo Fiscal ICMS</label
																>
															</div>
														</div>
														<div
															class="form-column"
															id="campo-incentivo-icms"
															style="display: none">
															<div class="form-group">
																<label for="incentivo-icms"
																	>Redu√ß√£o por Incentivo (%):</label
																>
																<input
																	type="number"
																	id="incentivo-icms"
																	value="0"
																	min="0"
																	max="100"
																	step="0.1" />
															</div>
														</div>
													</div>
												</div>

												<!-- IPI para empresas industriais -->
												<div id="campos-ipi" class="campos-operacao">
													<div class="form-row">
														<div class="form-column">
															<div class="form-group">
																<label for="aliquota-ipi">Al√≠quota IPI (%):</label>
																<input
																	type="number"
																	id="aliquota-ipi"
																	value="10.0"
																	min="0"
																	max="100"
																	step="0.01" />
															</div>
														</div>
													</div>

													<div class="form-row">
														<div class="form-column">
															<div class="form-group">
																<label for="ipi-base-calc"
																	>Base de C√°lculo (% do faturamento):</label
																>
																<input
																	type="number"
																	id="ipi-base-calc"
																	value="40"
																	min="0"
																	max="100"
																	step="0.1" />
																<small class="text-muted"
																	>Percentual de aquisi√ß√µes com IPI</small
																>
															</div>
														</div>
														<div class="form-column">
															<div class="form-group">
																<label for="ipi-perc-credito"
																	>Percentual de Aproveitamento (%):</label
																>
																<input
																	type="number"
																	id="ipi-perc-credito"
																	value="100"
																	min="0"
																	max="100"
																	step="0.1" />
																<small class="text-muted"
																	>Percentual efetivamente aproveitado</small
																>
															</div>
														</div>
													</div>

													<div class="form-row">
														<div class="form-column">
															<div class="form-group">
																<label for="creditos-ipi-calc"
																	>Cr√©ditos IPI Calculados:</label
																>
																<input
																	type="text"
																	id="creditos-ipi-calc"
																	class="money-input"
																	readonly />
																<small class="text-muted"
																	>Calculado automaticamente</small
																>
															</div>
														</div>
													</div>
												</div>

												<!-- ISS para empresas de servi√ßos -->
												<div id="campos-iss" class="campos-operacao" style="display: none">
													<div class="form-row">
														<div class="form-column">
															<div class="form-group">
																<label for="aliquota-iss">Al√≠quota ISS (%):</label>
																<input
																	type="number"
																	id="aliquota-iss"
																	value="5.0"
																	min="0"
																	max="10"
																	step="0.01" />
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									
									<div class="input-column-right">
									<!-- 1. Composi√ß√£o Tribut√°ria Detalhada (√∫nico bloco da direita) -->
									<div class="group-box composicao-tributaria-expandida">
										<h3>üìã Composi√ß√£o Tribut√°ria Detalhada</h3>
										<div id="composicao-tributaria">
											<div class="tributos-grid">
												<div class="tributos-coluna">
													<h5>üìà D√©bitos Tribut√°rios</h5>
													<div class="form-group">
														<label for="debito-pis">D√©bito PIS:</label>
														<input type="text" id="debito-pis" class="money-input" readonly />
													</div>
													<div class="form-group">
														<label for="debito-cofins">D√©bito COFINS:</label>
														<input
															type="text"
															id="debito-cofins"
															class="money-input"
															readonly />
													</div>
													<div class="form-group">
														<label for="debito-icms">D√©bito ICMS:</label>
														<input type="text" id="debito-icms" class="money-input" readonly />
													</div>
													<div class="form-group">
														<label for="debito-ipi">D√©bito IPI:</label>
														<input type="text" id="debito-ipi" class="money-input" readonly />
													</div>
													<div class="form-group">
														<label for="debito-iss">D√©bito ISS:</label>
														<input type="text" id="debito-iss" class="money-input" readonly />
													</div>
												</div>
												<div class="form-column">
													<h5>üìâ Cr√©ditos Tribut√°rios</h5>
													<div class="form-group">
														<label for="credito-pis">Cr√©dito PIS:</label>
														<input type="text" id="credito-pis" class="money-input" readonly />
													</div>
													<div class="form-group">
														<label for="credito-cofins">Cr√©dito COFINS:</label>
														<input
															type="text"
															id="credito-cofins"
															class="money-input"
															readonly />
													</div>
													<div class="form-group">
														<label for="credito-icms">Cr√©dito ICMS:</label>
														<input type="text" id="credito-icms" class="money-input" readonly />
													</div>
													<div class="form-group">
														<label for="credito-ipi">Cr√©dito IPI:</label>
														<input type="text" id="credito-ipi" class="money-input" readonly />
													</div>
													<div class="form-group">
														<label for="credito-iss">Cr√©dito ISS:</label>
														<input
															type="text"
															id="credito-iss"
															class="money-input"
															value="R$ 0,00"
															readonly />
													</div>
												</div>
												<div class="form-column">
													<h5>%üè¶ Al√≠quotas Efetivas (%)</h5>
													<div class="form-group">
														<label for="aliquota-efetiva-pis">PIS Efetivo:</label>
														<input
															type="number"
															id="aliquota-efetiva-pis"
															step="0.01"
															readonly />
													</div>
													<div class="form-group">
														<label for="aliquota-efetiva-cofins">COFINS Efetivo:</label>
														<input
															type="number"
															id="aliquota-efetiva-cofins"
															step="0.01"
															readonly />
													</div>
													<div class="form-group">
														<label for="aliquota-efetiva-icms">ICMS Efetivo:</label>
														<input
															type="number"
															id="aliquota-efetiva-icms"
															step="0.01"
															readonly />
													</div>
													<div class="form-group">
														<label for="aliquota-efetiva-ipi">IPI Efetivo:</label>
														<input
															type="number"
															id="aliquota-efetiva-ipi"
															step="0.01"
															readonly />
													</div>
													<div class="form-group">
														<label for="aliquota-efetiva-iss">ISS Efetivo:</label>
														<input
															type="number"
															id="aliquota-efetiva-iss"
															step="0.01"
															readonly />
													</div>
												</div>
											</div>
											<div class="form-row">
												<div class="form-column">
													<div class="form-group">
														<label for="total-debitos">Total de D√©bitos:</label>
														<input
															type="text"
															id="total-debitos"
															class="money-input"
															readonly />
													</div>
												</div>
												<div class="form-column">
													<div class="form-group">
														<label for="total-creditos">Total de Cr√©ditos:</label>
														<input
															type="text"
															id="total-creditos"
															class="money-input"
															readonly />
													</div>
												</div>
												<div class="form-column">
													<div class="form-group">
														<label for="aliquota-efetiva-total"
															>Al√≠quota Efetiva Total (%):</label
														>
														<input
															type="number"
															id="aliquota-efetiva-total"
															step="0.01"
															readonly />
													</div>
												</div>
											</div>
										</div>
									</div>
									</div>
								</div>
							</div>
								
							<!-- COLUNA DIREITA -->
							<div class="input-column-right">
								<!-- 1. Sistema IVA Dual -->
								<div class="group-box" data-icon="‚ö°">
									<h3>Sistema IVA Dual e Split Payment</h3>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="setor">Setor de Atividade:</label>
												<select id="setor" class="form-control" data-tooltip="Selecione o setor para aplicar al√≠quotas espec√≠ficas">
													<option value="">Selecione uma atividade...</option>
													<!-- Op√ß√µes preenchidas via JS -->
												</select>
											</div>
											<div class="form-group">
												<label for="aliquota-cbs">Al√≠quota CBS (%):</label>
												<input
													type="number"
													id="aliquota-cbs"
													min="0"
													max="100"
													step="0.1"
													readonly />
											</div>
											<div class="form-group">
												<label for="aliquota-ibs">Al√≠quota IBS (%):</label>
												<input
													type="number"
													id="aliquota-ibs"
													min="0"
													max="100"
													step="0.1"
													readonly />
											</div>
											<div class="form-group">
												<label for="reducao">Redu√ß√£o Especial (%):</label>
												<input
													type="number"
													id="reducao"
													min="0"
													max="100"
													step="0.1"
													readonly />
											</div>
											<div class="form-group">
												<label for="aliquota">Al√≠quota Efetiva (%):</label>
												<input
													type="number"
													id="aliquota"
													min="0"
													max="100"
													step="0.1"
													readonly />
											</div>
											<div class="form-group">
												<label for="categoria-iva">Categoria Tribut√°ria:</label>
												<select id="categoria-iva" disabled>
													<option value="standard">Padr√£o</option>
													<option value="reduced">Reduzida</option>
													<option value="exempt">Isenta</option>
												</select>
											</div>
										</div>
									</div>

									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="compensacao">Compensa√ß√£o de Cr√©ditos:</label>
												<select id="compensacao">
													<option value="automatica">Autom√°tica (Tempo Real)</option>
													<option value="mensal">Mensal</option>
													<option value="trimestral">Trimestral</option>
												</select>
											</div>
										</div>
									</div>
								</div>

								<!-- 2. Par√¢metros da Simula√ß√£o -->
								<div class="group-box" data-icon="‚öôÔ∏è">
									<h3>Par√¢metros da Simula√ß√£o</h3>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="data-inicial">Data Inicial:</label>
												<input type="date" id="data-inicial" value="2026-01-01" data-tooltip="In√≠cio do per√≠odo de simula√ß√£o" />
											</div>
										</div>
										<div class="form-column">
											<div class="form-group">
												<label for="data-final">Data Final:</label>
												<input type="date" id="data-final" value="2033-12-31" data-tooltip="Final do per√≠odo de simula√ß√£o" />
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="cenario">Cen√°rio de Crescimento:</label>
												<select id="cenario" data-tooltip="Proje√ß√£o de crescimento anual da empresa">
													<option value="">Selecione um cen√°rio...</option>
													<option value="conservador">üìâ Conservador (2% a.a.)</option>
													<option value="moderado">üìä Moderado (5% a.a.)</option>
													<option value="otimista">üìà Otimista (8% a.a.)</option>
													<option value="personalizado">üéØ Personalizado</option>
												</select>
											</div>
										</div>
										<div class="form-column">
											<div class="form-group" id="cenario-personalizado" style="display: none">
												<label for="taxa-crescimento">Taxa de Crescimento (% a.a.):</label>
												<input type="number" id="taxa-crescimento" value="5" min="0" max="100" step="0.1" data-tooltip="Taxa personalizada de crescimento anual" />
											</div>
										</div>
									</div>
								</div>			

								<!-- 3. BOT√ïES DE A√á√ÉO MODERNIZADOS -->
								<div class="action-buttons-section">
									<div class="action-buttons-container">
										<button id="btn-simular" class="btn-primary btn-large" data-tooltip="Execute a simula√ß√£o com os par√¢metros definidos">
											üöÄ Simular Split Payment
										</button>
										<button id="btn-limpar" class="btn-secondary btn-large" data-tooltip="Limpe todos os campos e reinicie">
											üóëÔ∏è Limpar Simula√ß√£o
										</button>
									</div>
								</div>
								
								<!-- Se√ß√£o de Exporta√ß√£o -->
								<div class="group-box export-section">
									<h3>üì§ Exportar Resultados</h3>
									<div class="button-group">
										<button id="btn-exportar-pdf" class="btn-primary" data-tooltip="Gere um relat√≥rio completo em PDF">
											üìÑ Exportar PDF
										</button>
										<button id="btn-exportar-excel" class="btn-success" data-tooltip="Exporte dados para planilha Excel">
											üìä Exportar Excel
										</button>
									</div>
								</div>
							</div>
						</div>
				

						<!-- √ÅREA DE RESULTADOS (largura completa reorganizada) -->
						<div class="results-full-width-container">
							<!-- Painel de Resultados da Simula√ß√£o -->
							<div class="panel-resultados-full">
								<h3>üìà Resultados da Simula√ß√£o</h3>
								<div class="year-selector">
									<label for="ano-visualizacao">Ano de Visualiza√ß√£o:</label>
									<select id="ano-visualizacao" onchange="atualizarResultadosPorAno()">
										<option value="2026">2026 (10%)</option>
										<option value="2027">2027 (25%)</option>
										<option value="2028">2028 (40%)</option>
										<option value="2029">2029 (55%)</option>
										<option value="2030">2030 (70%)</option>
										<option value="2031">2031 (85%)</option>
										<option value="2032">2032 (95%)</option>
										<option value="2033">2033 (100%)</option>
									</select>
								</div>
								<p class="text-muted">
									Preencha os dados e clique em "Simular" para visualizar os resultados.
								</p>

								<div class="result-container-reorganized">
									<!-- Conte√∫do dos resultados principais em grid -->
									<div id="resultados">								
										<!-- Resultados detalhados ser√£o carregados aqui -->
										<div id="resultados-detalhados" style="display: none">
											<div class="result-card">
												<h4>Compara√ß√£o de Sistemas Tribut√°rios</h4>
												<div class="result-grid">
													<div class="result-item">
														<span class="label">Sistema Atual:</span>
														<span id="tributo-atual" class="value"></span>
													</div>
													<div class="result-item">
														<span class="label">Sistema IVA Dual:</span>
														<span id="tributo-dual" class="value"></span>
													</div>
													<div class="result-item">
														<span class="label">Diferen√ßa:</span>
														<span id="tributo-diferenca" class="value"></span>
													</div>
													<div class="result-item">
														<span class="label">Sistema IVA sem Split:</span>
														<span id="tributo-iva-sem-split" class="value"></span>
													</div>
													<div class="result-item">
														<span class="label">Diferen√ßa IVA sem Split:</span>
														<span id="tributo-diferenca-iva-sem-split" class="value"></span>
													</div>
												</div>
											</div>

											<div class="result-card">
												<h4>Impacto no Capital de Giro</h4>
												<div class="result-grid">
													<div class="result-item">
														<span class="label">Regime Atual:</span>
														<span id="capital-giro-atual" class="value"></span>
													</div>
													<div class="result-item">
														<span class="label">Regime IVA sem Split:</span>
														<span id="capital-giro-iva-sem-split" class="value"></span>
													</div>
													<div class="result-item">
														<span class="label">Regime Split Payment:</span>
														<span id="capital-giro-split" class="value"></span>
													</div>
													<div class="result-item">
														<span class="label">Impacto Total:</span>
														<span id="capital-giro-impacto" class="value impact"></span>
													</div>
													<div class="result-item">
														<span class="label">Impacto IVA sem Split:</span>
														<span id="capital-giro-impacto-iva-sem-split" class="value"></span>
													</div>
													<div class="result-item">
														<span class="label">Necessidade Adicional:</span>
														<span id="capital-giro-necessidade" class="value impact"></span>
													</div>
												</div>
											</div>

											<div class="result-card">
												<h4>Impacto na Margem Operacional</h4>
												<div class="result-grid">
													<div class="result-item">
														<span class="label">Margem Atual:</span>
														<span id="margem-atual" class="value"></span>
													</div>
													<div class="result-item">
														<span class="label">Margem Ajustada:</span>
														<span id="margem-ajustada" class="value"></span>
													</div>
													<div class="result-item">
														<span class="label">Impacto (p.p.):</span>
														<span id="margem-impacto" class="value impact"></span>
													</div>
												</div>
											</div>

											<div class="result-card">
												<h4>An√°lise de Impacto Detalhada</h4>
												<div class="result-grid">
													<div class="result-item">
														<span class="label">Percentual de Impacto:</span>
														<span id="percentual-impacto" class="value"></span>
													</div>
													<div class="result-item">
														<span class="label">Impacto em Dias de Faturamento:</span>
														<span id="impacto-dias-faturamento" class="value"></span>
													</div>
												</div>
											</div>

											<div class="result-card">
												<h4>Proje√ß√£o Temporal do Impacto</h4>
												<div class="result-grid">
													<div class="result-item">
														<span class="label">Necessidade Total de Capital de Giro:</span>
														<span id="total-necessidade-giro" class="value"></span>
													</div>
													<div class="result-item">
														<span class="label">Custo Financeiro Total:</span>
														<span id="custo-financeiro-total" class="value"></span>
													</div>
												</div>
											</div>
										</div>
									</div>

									<!-- Se√ß√£o de Evolu√ß√£o Tribut√°ria -->
									<section id="evolucao-tributaria" class="results-section" style="display: none;">
										<div class="section-header">
											<h3>Evolu√ß√£o da Tributa√ß√£o Durante a Transi√ß√£o</h3>
											<p>Detalhamento ano a ano da transi√ß√£o do sistema tribut√°rio atual para o IVA Dual</p>
										</div>

										<div class="table-container">
											<table id="tabela-evolucao-tributaria" class="evolucao-table">
												<thead>
													<tr>
														<th rowspan="2">Ano</th>
														<th colspan="4" class="grupo-atual">Sistema Atual</th>
														<th colspan="2" class="grupo-novo">Sistema IVA Dual</th>
														<th rowspan="2">Total</th>
													</tr>
													<tr>
														<th class="imposto-atual">PIS</th>
														<th class="imposto-atual">COFINS</th>
														<th class="imposto-atual">ICMS</th>
														<th class="imposto-atual">IPI</th>
														<th class="imposto-novo">IBS</th>
														<th class="imposto-novo">CBS</th>
													</tr>
												</thead>
												<tbody>
													<!-- Conte√∫do ser√° preenchido via JavaScript -->
												</tbody>
											</table>
										</div>

										<div class="chart-container">
											<canvas id="grafico-evolucao-tributaria" width="800" height="400"></canvas>
										</div>
									</section>
								</div>
							</div>

							<!-- Painel de Gr√°ficos Comparativos -->
							<div class="panel-graficos-full">
								<h3>üìä Gr√°ficos Comparativos</h3>

								<!-- Gr√°ficos principais -->
								<div class="charts-grid-reorganized">
									<div class="chart-container">
										<canvas id="grafico-fluxo-caixa"></canvas>
									</div>
									<div class="chart-container">
										<canvas id="grafico-capital-giro"></canvas>
									</div>
									<div class="chart-container">
										<canvas id="grafico-projecao"></canvas>
									</div>
									<div class="chart-container">
										<canvas id="grafico-decomposicao"></canvas>
									</div>
									<div class="chart-container">
										<canvas id="grafico-sensibilidade"></canvas>
									</div>
								</div>

								<!-- Detalhamento por imposto durante a transi√ß√£o - MOVIDO PARA C√Å -->
								<div class="result-card" id="detalhamento-impostos-transicao" style="display: none;">
									<h4>Detalhamento por Imposto Durante a Transi√ß√£o</h4>
									<div class="charts-grid-detalhamento">
										<div class="chart-container">
											<canvas id="grafico-evolucao-pis-cofins"></canvas>
										</div>
										<div class="chart-container">
											<canvas id="grafico-evolucao-icms"></canvas>
										</div>
										<div class="chart-container">
											<canvas id="grafico-evolucao-ipi"></canvas>
										</div>
										<div class="chart-container">
											<canvas id="grafico-evolucao-total"></canvas>
										</div>
									</div>
								</div>
							</div>										

						
						</div>
					</div>
				</div>
		
				<!-- Conte√∫do da aba Configura√ß√µes - manter o ID original -->
				<div id="configuracoes" class="tab-content">
					<h2>Configura√ß√µes</h2>

					<!-- Par√¢metros Gerais do Split Payment -->
					<div class="panel mb-4">
						<h3 class="panel-title">Par√¢metros Gerais do Split Payment</h3>
						<p class="text-muted mb-3">
							Configure os valores base para o c√°lculo do split payment que ser√£o aplicados a todos os
							setores, exceto quando houver configura√ß√µes espec√≠ficas.
						</p>

						<div class="grid" style="grid-template-columns: repeat(3, 1fr); gap: 20px">
							<div class="form-group">
								<label for="aliquota-cbs">Al√≠quota CBS (%):</label>
								<div class="input-group">
									<input
										type="number"
										id="aliquota-cbs"
										name="aliquota-cbs"
										min="0"
										max="100"
										step="0.01"
										value="8.8" />
									<div class="input-group-append">
										<span class="input-group-text">%</span>
									</div>
								</div>
								<small class="help-text">Contribui√ß√£o sobre Bens e Servi√ßos - Al√≠quota Federal</small>
							</div>
							<div class="form-group">
								<label for="aliquota-ibs">Al√≠quota IBS (%):</label>
								<div class="input-group">
									<input
										type="number"
										id="aliquota-ibs"
										name="aliquota-ibs"
										min="0"
										max="100"
										step="0.01"
										value="17.7" />
									<div class="input-group-append">
										<span class="input-group-text">%</span>
									</div>
								</div>
								<small class="help-text"
									>Imposto sobre Bens e Servi√ßos - Al√≠quota Estadual/Municipal</small
								>
							</div>
							<div class="form-group">
								<label for="data-inicio">Data de In√≠cio:</label>
								<input type="month" id="data-inicio" name="data-inicio" value="2026-01" min="2026-01" />
								<small class="help-text">In√≠cio da implementa√ß√£o do split payment</small>
							</div>
						</div>

						<h3 class="section-subtitle mt-4">Cronograma de Implementa√ß√£o</h3>
						<p class="text-muted mb-3">
							Defina o percentual de implementa√ß√£o do split payment ao longo dos anos de transi√ß√£o
							(2026-2033).
						</p>

						<div class="table-actions">
							<button type="button" class="btn btn-outline" id="btn-restaurar-cronograma">
								Restaurar Cronograma Padr√£o
							</button>
						</div>

						<div class="table-container">
							<table class="editable-table cronograma-table" id="cronograma-table">
								<thead>
									<tr>
										<th>Ano</th>
										<th>Percentual (%)</th>
										<th>Observa√ß√µes</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>2026</td>
										<td>
											<input
												type="number"
												name="perc-2026"
												min="0"
												max="100"
												step="0.1"
												value="10.0" />
										</td>
										<td><input type="text" name="obs-2026" placeholder="Observa√ß√µes..." /></td>
									</tr>
									<tr>
										<td>2027</td>
										<td>
											<input
												type="number"
												name="perc-2027"
												min="0"
												max="100"
												step="0.1"
												value="25.0" />
										</td>
										<td><input type="text" name="obs-2027" placeholder="Observa√ß√µes..." /></td>
									</tr>
									<tr>
										<td>2028</td>
										<td>
											<input
												type="number"
												name="perc-2028"
												min="0"
												max="100"
												step="0.1"
												value="40.0" />
										</td>
										<td><input type="text" name="obs-2028" placeholder="Observa√ß√µes..." /></td>
									</tr>
									<tr>
										<td>2029</td>
										<td>
											<input
												type="number"
												name="perc-2029"
												min="0"
												max="100"
												step="0.1"
												value="55.0" />
										</td>
										<td><input type="text" name="obs-2029" placeholder="Observa√ß√µes..." /></td>
									</tr>
									<tr>
										<td>2030</td>
										<td>
											<input
												type="number"
												name="perc-2030"
												min="0"
												max="100"
												step="0.1"
												value="70.0" />
										</td>
										<td><input type="text" name="obs-2030" placeholder="Observa√ß√µes..." /></td>
									</tr>
									<tr>
										<td>2031</td>
										<td>
											<input
												type="number"
												name="perc-2031"
												min="0"
												max="100"
												step="0.1"
												value="85.0" />
										</td>
										<td><input type="text" name="obs-2031" placeholder="Observa√ß√µes..." /></td>
									</tr>
									<tr>
										<td>2032</td>
										<td>
											<input
												type="number"
												name="perc-2032"
												min="0"
												max="100"
												step="0.1"
												value="95.0" />
										</td>
										<td><input type="text" name="obs-2032" placeholder="Observa√ß√µes..." /></td>
									</tr>
									<tr>
										<td>2033</td>
										<td>
											<input
												type="number"
												name="perc-2033"
												min="0"
												max="100"
												step="0.1"
												value="100.0" />
										</td>
										<td><input type="text" name="obs-2033" placeholder="Observa√ß√µes..." /></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>

					<!-- Configura√ß√µes Espec√≠ficas por Setor -->
					<div class="panel mb-4">
						<h3 class="panel-title">Configura√ß√µes Espec√≠ficas por Setor</h3>
						<p class="text-muted mb-3">
							Configure par√¢metros espec√≠ficos para setores que possuem tratamento diferenciado no regime
							do split payment.
						</p>

						<div class="table-actions">
							<button type="button" class="btn btn-primary" id="btn-adicionar-setor">
								Adicionar Setor
							</button>
						</div>

						<div class="table-container">
							<table class="editable-table sector-table" id="sector-table">
								<thead>
									<tr>
										<th>Setor</th>
										<th>Al√≠quota Espec√≠fica (%)</th>
										<th>Redu√ß√£o Especial (%)</th>
										<th>Cronograma Pr√≥prio</th>
										<th class="actions-column">A√ß√µes</th>
									</tr>
								</thead>
								<tbody>
									<tr id="setor-1">
										<td>
											<select name="setor-nome-1" class="setor-select" data-id="1">
												<option value="">Selecione um setor...</option>
												<!-- Op√ß√µes de setores ser√£o adicionadas via JavaScript -->
											</select>
										</td>
										<td>
											<input
												type="number"
												name="setor-aliquota-1"
												min="0"
												max="100"
												step="0.01"
												value="26.5" />
										</td>
										<td>
											<input
												type="number"
												name="setor-reducao-1"
												min="0"
												max="100"
												step="0.01"
												value="0" />
										</td>
										<td>
											<select name="setor-cronograma-1">
												<option value="padrao">Cronograma Padr√£o</option>
												<option value="proprio">Cronograma Espec√≠fico</option>
											</select>
										</td>
										<td>
											<button
												type="button"
												class="btn btn-outline btn-sm"
												onclick="configurarCronogramaSetor(1)">
												Configurar
											</button>
											<button
												type="button"
												class="btn btn-accent btn-sm"
												onclick="removerSetor(1)">
												Remover
											</button>
										</td>
									</tr>
									<tr id="setor-2">
										<td>
											<select name="setor-nome-2" class="setor-select" data-id="2">
												<option value="">Selecione um setor...</option>
												<!-- Op√ß√µes de setores ser√£o adicionadas via JavaScript -->
											</select>
										</td>
										<td>
											<input
												type="number"
												name="setor-aliquota-2"
												min="0"
												max="100"
												step="0.01"
												value="26.5" />
										</td>
										<td>
											<input
												type="number"
												name="setor-reducao-2"
												min="0"
												max="100"
												step="0.01"
												value="0" />
										</td>
										<td>
											<select name="setor-cronograma-2">
												<option value="padrao">Cronograma Padr√£o</option>
												<option value="proprio">Cronograma Espec√≠fico</option>
											</select>
										</td>
										<td>
											<button
												type="button"
												class="btn btn-outline btn-sm"
												onclick="configurarCronogramaSetor(2)">
												Configurar
											</button>
											<button
												type="button"
												class="btn btn-accent btn-sm"
												onclick="removerSetor(2)">
												Remover
											</button>
										</td>
									</tr>
									<tr id="setor-3">
										<td>
											<select name="setor-nome-3" class="setor-select" data-id="3">
												<option value="">Selecione um setor...</option>
												<!-- Op√ß√µes de setores ser√£o adicionadas via JavaScript -->
											</select>
										</td>
										<td>
											<input
												type="number"
												name="setor-aliquota-3"
												min="0"
												max="100"
												step="0.01"
												value="26.5" />
										</td>
										<td>
											<input
												type="number"
												name="setor-reducao-3"
												min="0"
												max="100"
												step="0.01"
												value="0" />
										</td>
										<td>
											<select name="setor-cronograma-3">
												<option value="padrao">Cronograma Padr√£o</option>
												<option value="proprio">Cronograma Espec√≠fico</option>
											</select>
										</td>
										<td>
											<button
												type="button"
												class="btn btn-outline btn-sm"
												onclick="configurarCronogramaSetor(3)">
												Configurar
											</button>
											<button
												type="button"
												class="btn btn-accent btn-sm"
												onclick="removerSetor(3)">
												Remover
											</button>
										</td>
									</tr>
								</tbody>
							</table>
						</div>

						<!-- Par√¢metros Financeiros -->
						<div class="panel mb-4">
							<h3 class="panel-title">Par√¢metros Financeiros</h3>
							<p class="text-muted mb-3">
								Configure os par√¢metros financeiros para c√°lculo do impacto do split payment no capital
								de giro e fluxo de caixa.
							</p>

							<div class="grid" style="grid-template-columns: repeat(3, 1fr); gap: 20px">
								<div class="form-group">
									<label for="taxa-antecipacao">Taxa M√©dia de Antecipa√ß√£o de Receb√≠veis:</label>
									<div class="input-group">
										<input
											type="number"
											id="taxa-antecipacao"
											name="taxa-antecipacao"
											min="0"
											max="100"
											step="0.01"
											value="1.8" />
										<div class="input-group-append">
											<span class="input-group-text">% a.m.</span>
										</div>
									</div>
									<small class="help-text">Taxa m√©dia para antecipa√ß√£o de receb√≠veis ao m√™s</small>
								</div>

								<div class="form-group">
									<label for="taxa-capital-giro">Taxa M√©dia de Capital de Giro:</label>
									<div class="input-group">
										<input
											type="number"
											id="taxa-capital-giro"
											name="taxa-capital-giro"
											min="0"
											max="100"
											step="0.01"
											value="2.1" />
										<div class="input-group-append">
											<span class="input-group-text">% a.m.</span>
										</div>
									</div>
									<small class="help-text">Taxa m√©dia para linhas de capital de giro ao m√™s</small>
								</div>
							</div>

							<div class="form-group">
								<label for="spread-bancario">Spread Banc√°rio M√©dio:</label>
								<div class="input-group">
									<input
										type="number"
										id="spread-bancario"
										name="spread-bancario"
										min="0"
										max="100"
										step="0.01"
										value="3.5" />
									<div class="input-group-append">
										<span class="input-group-text">p.p.</span>
									</div>
								</div>
								<small class="help-text">Spread banc√°rio m√©dio em pontos percentuais</small>
							</div>

							<div class="form-group mt-3">
								<label for="observacoes-financeiras">Observa√ß√µes Adicionais:</label>
								<textarea
									id="observacoes-financeiras"
									name="observacoes-financeiras"
									rows="3"
									placeholder="Insira aqui observa√ß√µes adicionais sobre os par√¢metros financeiros..."></textarea>
							</div>

							<!-- Bot√µes de A√ß√£o -->
							<div class="form-actions">
								<button type="button" class="btn btn-primary" id="btn-salvar-configuracoes">
									Salvar Configura√ß√µes
								</button>
								<button type="button" class="btn btn-secondary" id="btn-restaurar-padroes">
									Restaurar Padr√µes
								</button>
							</div>

							<!-- Modal para Configura√ß√£o de Cronograma Setorial -->
							<div class="modal-backdrop" id="modal-cronograma-setor">
								<div class="modal">
									<div class="modal-header">
										<h3 class="modal-title">Cronograma Espec√≠fico para Setor</h3>
										<button type="button" class="modal-close" id="btn-fechar-modal">&times;</button>
									</div>
									<div class="modal-body">
										<div class="mb-3">
											<label for="modal-setor-nome" class="fw-bold">Setor:</label>
											<span id="modal-setor-nome"></span>
											<input type="hidden" id="modal-setor-id" />
										</div>

										<div class="table-container">
											<table class="editable-table cronograma-table" id="cronograma-setor-table">
												<thead>
													<tr>
														<th>Ano</th>
														<th>Percentual (%)</th>
														<th>Observa√ß√µes</th>
													</tr>
												</thead>
												<tbody>
													<!-- Ser√° preenchido dinamicamente por JavaScript -->
												</tbody>
											</table>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-primary" id="btn-salvar-cronograma-setor">
											Salvar
										</button>
										<button type="button" class="btn btn-secondary" id="btn-cancelar-modal">
											Cancelar
										</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Aba de Estrat√©gias de Mitiga√ß√£o -->
				<div id="estrategias" class="tab-content">
					<div class="strategy-tab-container">
						<div class="strategy-tab-buttons">
							<button class="strategy-tab-button active" data-strategy-tab="ajuste-precos">
								Ajuste de Pre√ßos
							</button>
							<button class="strategy-tab-button" data-strategy-tab="renegociacao-prazos">
								Renegocia√ß√£o de Prazos
							</button>
							<button class="strategy-tab-button" data-strategy-tab="antecipacao-recebiveis">
								Antecipa√ß√£o de Receb√≠veis
							</button>
							<button class="strategy-tab-button" data-strategy-tab="capital-giro">
								Capital de Giro
							</button>
							<button class="strategy-tab-button" data-strategy-tab="mix-produtos">
								Mix de Produtos
							</button>
							<button class="strategy-tab-button" data-strategy-tab="meios-pagamento">
								Meios de Pagamento
							</button>
						</div>

						<!-- Ajuste de Pre√ßos -->
						<div id="estrategia-ajuste-precos" class="strategy-tab-content active">
							<div class="group-box">
								<h3>Ajuste de Pre√ßos</h3>
								<p>Compensar a perda de fluxo de caixa atrav√©s de aumento em pre√ßos.</p>

								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="ap-ativar">Ativar Estrat√©gia:</label>
											<select id="ap-ativar">
												<option value="0">N√£o</option>
												<option value="1">Sim</option>
											</select>
										</div>
									</div>
									<div class="form-column">
										<div class="form-group">
											<label for="ap-percentual">Percentual de Aumento (%):</label>
											<input
												type="number"
												id="ap-percentual"
												value="5"
												min="0"
												max="100"
												step="0.1" />
										</div>
									</div>
								</div>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="ap-elasticidade">Elasticidade-Pre√ßo da Demanda:</label>
											<input type="number" id="ap-elasticidade" value="-1.2" step="0.1" />
										</div>
									</div>
									<div class="form-column">
										<div class="form-group">
											<label for="ap-impacto-vendas">Impacto nas Vendas (%):</label>
											<input type="number" id="ap-impacto-vendas" value="0" readonly />
										</div>
									</div>
								</div>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="ap-periodo">Per√≠odo de Ajuste (meses):</label>
											<input type="number" id="ap-periodo" value="3" min="1" step="1" />
										</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Renegocia√ß√£o de Prazos -->
						<div id="estrategia-renegociacao-prazos" class="strategy-tab-content">
							<div class="group-box">
								<h3>Renegocia√ß√£o de Prazos</h3>
								<p>Negociar prazos mais longos com fornecedores para melhorar o ciclo financeiro.</p>

								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="rp-ativar">Ativar Estrat√©gia:</label>
											<select id="rp-ativar">
												<option value="0">N√£o</option>
												<option value="1">Sim</option>
											</select>
										</div>
									</div>
									<div class="form-column">
										<div class="form-group">
											<label for="rp-aumento-prazo">Aumento do Prazo (dias):</label>
											<input type="number" id="rp-aumento-prazo" value="15" min="0" step="1" />
										</div>
									</div>
								</div>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="rp-percentual">Percentual de Fornecedores (%):</label>
											<input
												type="number"
												id="rp-percentual"
												value="60"
												min="0"
												max="100"
												step="1" />
										</div>
									</div>
									<div class="form-column">
										<div class="form-group">
											<label for="rp-contrapartidas">Contrapartidas:</label>
											<select id="rp-contrapartidas">
												<option value="nenhuma">Nenhuma</option>
												<option value="volume">Aumento de Volume</option>
												<option value="precos">Reajuste de Pre√ßos</option>
												<option value="contratos">Compromisso Contratual</option>
											</select>
										</div>
									</div>
								</div>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="rp-custo">Custo da Contrapartida (%):</label>
											<input type="number" id="rp-custo" value="0" min="0" step="0.1" />
										</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Antecipa√ß√£o de Receb√≠veis -->
						<div id="estrategia-antecipacao-recebiveis" class="strategy-tab-content">
							<div class="group-box">
								<h3>Antecipa√ß√£o de Receb√≠veis</h3>
								<p>Antecipar receb√≠veis para compensar o impacto no capital de giro.</p>

								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="ar-ativar">Ativar Estrat√©gia:</label>
											<select id="ar-ativar">
												<option value="0">N√£o</option>
												<option value="1">Sim</option>
											</select>
										</div>
									</div>
									<div class="form-column">
										<div class="form-group">
											<label for="ar-percentual">Percentual de Antecipa√ß√£o (%):</label>
											<input
												type="number"
												id="ar-percentual"
												value="50"
												min="0"
												max="100"
												step="1" />
										</div>
									</div>
								</div>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="ar-taxa">Taxa de Desconto (% a.m.):</label>
											<input type="number" id="ar-taxa" value="1.8" min="0" step="0.1" />
										</div>
									</div>
									<div class="form-column">
										<div class="form-group">
											<label for="ar-prazo">Prazo M√©dio Antecipado (dias):</label>
											<input type="number" id="ar-prazo" value="25" min="0" step="1" />
										</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Capital de Giro -->
						<div id="estrategia-capital-giro" class="strategy-tab-content">
							<div class="group-box">
								<h3>Capital de Giro</h3>
								<p>Contrata√ß√£o de linha de capital de giro para suprir a necessidade adicional.</p>

								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="cg-ativar">Ativar Estrat√©gia:</label>
											<select id="cg-ativar">
												<option value="0">N√£o</option>
												<option value="1">Sim</option>
											</select>
										</div>
									</div>
									<div class="form-column">
										<div class="form-group">
											<label for="cg-valor">Valor de Capta√ß√£o (%):</label>
											<input type="number" id="cg-valor" value="100" min="0" max="200" step="1" />
											<small>Percentual da necessidade adicional de capital</small>
										</div>
									</div>
								</div>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="cg-taxa">Taxa de Juros (% a.m.):</label>
											<input type="number" id="cg-taxa" value="2.1" min="0" step="0.1" />
										</div>
									</div>
									<div class="form-column">
										<div class="form-group">
											<label for="cg-prazo">Prazo de Pagamento (meses):</label>
											<input type="number" id="cg-prazo" value="12" min="1" step="1" />
										</div>
									</div>
								</div>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="cg-carencia">Car√™ncia (meses):</label>
											<input type="number" id="cg-carencia" value="3" min="0" step="1" />
										</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Mix de Produtos -->
						<div id="estrategia-mix-produtos" class="strategy-tab-content">
							<div class="group-box">
								<h3>Mix de Produtos</h3>
								<p>Ajustar mix de produtos para priorizar itens com ciclo financeiro mais favor√°vel.</p>

								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="mp-ativar">Ativar Estrat√©gia:</label>
											<select id="mp-ativar">
												<option value="0">N√£o</option>
												<option value="1">Sim</option>
											</select>
										</div>
									</div>
									<div class="form-column">
										<div class="form-group">
											<label for="mp-percentual">Percentual de Ajuste (%):</label>
											<input
												type="number"
												id="mp-percentual"
												value="30"
												min="0"
												max="100"
												step="1" />
										</div>
									</div>
								</div>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="mp-foco">Foco do Ajuste:</label>
											<select id="mp-foco">
												<option value="ciclo">Ciclo Financeiro</option>
												<option value="margem">Margem de Contribui√ß√£o</option>
												<option value="vista">Vendas √† Vista</option>
											</select>
										</div>
									</div>
									<div class="form-column">
										<div class="form-group">
											<label for="mp-impacto-receita">Impacto na Receita (%):</label>
											<input type="number" id="mp-impacto-receita" value="-5" step="0.1" />
										</div>
									</div>
								</div>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="mp-impacto-margem">Impacto na Margem (p.p.):</label>
											<input type="number" id="mp-impacto-margem" value="3.5" step="0.1" />
										</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Meios de Pagamento -->
						<div id="estrategia-meios-pagamento" class="strategy-tab-content">
							<div class="group-box">
								<h3>Meios de Pagamento</h3>
								<p>Incentivar meios de pagamento mais favor√°veis ao fluxo de caixa.</p>

								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="mp-pag-ativar">Ativar Estrat√©gia:</label>
											<select id="mp-pag-ativar">
												<option value="0">N√£o</option>
												<option value="1">Sim</option>
											</select>
										</div>
									</div>
								</div>

								<div class="form-group">
									<label>Distribui√ß√£o Atual:</label>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="mp-pag-vista-atual">√Ä Vista (%):</label>
												<input
													type="number"
													id="mp-pag-vista-atual"
													value="30"
													min="0"
													max="100"
													step="1"
													readonly />
											</div>
										</div>
										<div class="form-column">
											<div class="form-group">
												<label for="mp-pag-prazo-atual">A Prazo (%):</label>
												<input
													type="number"
													id="mp-pag-prazo-atual"
													value="70"
													min="0"
													max="100"
													step="1"
													readonly />
											</div>
										</div>
									</div>
								</div>

								<div class="form-group">
									<label>Nova Distribui√ß√£o:</label>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="mp-pag-vista-novo">√Ä Vista (%):</label>
												<input
													type="number"
													id="mp-pag-vista-novo"
													value="40"
													min="0"
													max="100"
													step="1" />
											</div>
										</div>
										<div class="form-column">
											<div class="form-group">
												<label for="mp-pag-30-novo">30 dias (%):</label>
												<input
													type="number"
													id="mp-pag-30-novo"
													value="30"
													min="0"
													max="100"
													step="1" />
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="form-column">
											<div class="form-group">
												<label for="mp-pag-60-novo">60 dias (%):</label>
												<input
													type="number"
													id="mp-pag-60-novo"
													value="20"
													min="0"
													max="100"
													step="1" />
											</div>
										</div>
										<div class="form-column">
											<div class="form-group">
												<label for="mp-pag-90-novo">90 dias (%):</label>
												<input
													type="number"
													id="mp-pag-90-novo"
													value="10"
													min="0"
													max="100"
													step="1" />
											</div>
										</div>
									</div>
								</div>

								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="mp-pag-taxa-incentivo">Taxa de Incentivo (%):</label>
											<input
												type="number"
												id="mp-pag-taxa-incentivo"
												value="3"
												min="0"
												step="0.1" />
											<small>Desconto para pagamentos √† vista</small>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="group-box">
						<h3>Resultados Estimados com Estrat√©gias</h3>
						<div class="year-selector">
							<label for="ano-visualizacao-estrategias">Ano de Visualiza√ß√£o:</label>
							<select id="ano-visualizacao-estrategias" onchange="atualizarVisualizacaoEstrategias()">
								<option value="2026">2026 (10%)</option>
								<option value="2027">2027 (25%)</option>
								<option value="2028">2028 (40%)</option>
								<option value="2029">2029 (55%)</option>
								<option value="2030">2030 (70%)</option>
								<option value="2031">2031 (85%)</option>
								<option value="2032">2032 (95%)</option>
								<option value="2033">2033 (100%)</option>
								<!-- Ser√° preenchido dinamicamente pelo JavaScript -->
							</select>
						</div>
						<div id="resultados-estrategias">
							<p class="text-muted">
								Selecione as estrat√©gias de mitiga√ß√£o e simule para ver os resultados estimados.
							</p>
							<!-- Dentro da div com id "resultados-estrategias", adicionar: -->
							<div class="systems-comparison">
								<h5>Compara√ß√£o entre Sistemas Tribut√°rios</h5>
								<table class="comparison-table">
									<thead>
										<tr>
											<th>Sistema</th>
											<th>Capital de Giro</th>
											<th>Impostos</th>
											<th>Efetividade</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td>Regime Atual</td>
											<td id="estrategia-atual-capital">R$ 0,00</td>
											<td id="estrategia-atual-impostos">R$ 0,00</td>
											<td id="estrategia-atual-efetividade">0.0%</td>
										</tr>
										<tr>
											<td>IVA sem Split</td>
											<td id="estrategia-iva-sem-split-capital">R$ 0,00</td>
											<td id="estrategia-iva-sem-split-impostos">R$ 0,00</td>
											<td id="estrategia-iva-sem-split-efetividade">0.0%</td>
										</tr>
										<tr>
											<td>IVA com Split</td>
											<td id="estrategia-iva-com-split-capital">R$ 0,00</td>
											<td id="estrategia-iva-com-split-impostos">R$ 0,00</td>
											<td id="estrategia-iva-com-split-efetividade">0.0%</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>

						<!-- √Årea para dados comparativos de estrat√©gias -->
						<div id="dados-comparativos-estrategias" style="display: none">
							<!-- Ser√° preenchido dinamicamente pelo JavaScript -->
						</div>
					</div>

					<!-- Adicionar √† se√ß√£o de gr√°ficos da aba Estrat√©gias -->
					<div class="charts-grid">
						<div class="chart-container">
							<canvas id="grafico-efetividade-estrategias"></canvas>
						</div>
						<div class="chart-container">
							<canvas id="grafico-comparacao-estrategias"></canvas>
						</div>
						<div class="chart-container">
							<canvas id="grafico-evolucao-estrategias"></canvas>
						</div>
					</div>

					<div class="button-group">
						<button id="btn-simular-estrategias">Simular Estrat√©gias</button>
						<button id="btn-exportar-estrategias-pdf">Exportar PDF</button>
						<button id="btn-exportar-estrategias-excel">Exportar Excel</button>
					</div>
				</div>

				<!-- Aba de Mem√≥ria de C√°lculo -->
				<div id="memoria" class="tab-content">
					<div class="form-group">
						<label for="select-ano-memoria">Selecione o ano:</label>
						<select id="select-ano-memoria">
							<option value="2026">2026</option>
							<option value="2027">2027</option>
							<option value="2028">2028</option>
							<option value="2029">2029</option>
							<option value="2030">2030</option>
							<option value="2031">2031</option>
							<option value="2032">2032</option>
							<option value="2033">2033</option>
						</select>
					</div>
					<button id="btn-atualizar-memoria">Atualizar Mem√≥ria</button>
					<div id="memoria-calculo">Realize uma simula√ß√£o para gerar a mem√≥ria de c√°lculo detalhada.</div>
					<div class="button-group">
						<button id="btn-exportar-memoria">Exportar Mem√≥ria de C√°lculo</button>
					</div>
				</div>

				<!-- Aba de Ajuda e Documenta√ß√£o -->
				<div id="ajuda" class="tab-content">
					<div class="help-section">
						<h3>O que √© o Split Payment?</h3>
						<p>
							O Split Payment √© um mecanismo introduzido pela reforma tribut√°ria brasileira (LC 214/2025)
							que automatiza o recolhimento tribut√°rio no momento da transa√ß√£o comercial, separando o
							valor do tributo do pre√ßo do bem ou servi√ßo e direcionando-o diretamente aos cofres
							p√∫blicos.
						</p>
						<p>
							Este sistema altera significativamente o fluxo de caixa das empresas, pois elimina o
							intervalo entre o recebimento da venda e o pagamento do imposto, que tradicionalmente
							ocorria no m√™s seguinte.
						</p>
					</div>

					<div class="help-section">
						<h3>Como funciona o Split Payment?</h3>
						<p>
							No modelo padr√£o, ao realizar uma venda com split payment, o sistema divide automaticamente
							o valor:
						</p>
						<ul>
							<li><strong>Parte do valor</strong> √© creditada diretamente ao vendedor.</li>
							<li>
								<strong>Parte correspondente aos impostos</strong> √© direcionada automaticamente ao
								Comit√™ Gestor do IBS e √† Receita Federal.
							</li>
						</ul>
						<p>
							Por exemplo, em uma venda de R$ 1.000 com al√≠quota de 26,5%, aproximadamente R$ 735,50 s√£o
							creditados ao vendedor e R$ 264,50 v√£o direto para o fisco.
						</p>
					</div>

					<div class="help-section">
						<h3>Impacto no Fluxo de Caixa</h3>
						<p>
							O principal impacto do split payment √© a redu√ß√£o do capital de giro dispon√≠vel, pois o valor
							do tributo deixa de estar temporariamente sob controle da empresa. No regime anterior, as
							empresas utilizavam o montante tribut√°rio entre o recebimento da venda e o recolhimento do
							imposto como capital de giro.
						</p>
					</div>

					<div class="help-section">
						<h3>Como usar o Simulador</h3>
						<ol>
							<li>
								<strong>Aba Simula√ß√£o</strong>: Preencha os dados da empresa, ciclo financeiro,
								par√¢metros de tributa√ß√£o e simula√ß√£o, e clique em "Simular" para visualizar o impacto no
								fluxo de caixa.
							</li>
							<li>
								<strong>Aba Configura√ß√µes</strong>: Ajuste par√¢metros financeiros e setoriais para
								personalizar a simula√ß√£o.
							</li>
							<li>
								<strong>Aba Estrat√©gias de Mitiga√ß√£o</strong>: Teste diferentes estrat√©gias para mitigar
								o impacto do split payment no fluxo de caixa.
							</li>
							<li>
								<strong>Aba Mem√≥ria de C√°lculo</strong>: Visualize os c√°lculos detalhados por tr√°s dos
								resultados apresentados.
							</li>
						</ol>
					</div>

					<div class="help-section">
						<h3>Implementa√ß√£o Progressiva</h3>
						<p>
							O split payment ser√° implementado gradualmente, come√ßando com testes piloto em 2026 e
							alcan√ßando implementa√ß√£o total em 2033. Durante esse per√≠odo, apenas uma parcela dos
							tributos ser√° recolhida via split payment, aumentando progressivamente conforme o cronograma
							oficial.
						</p>
					</div>
				</div>

				<!-- Aba de Importa√ß√£o SPED -->
				<div id="importacao-sped" class="tab-content">
					<div class="import-container">
						<div class="import-header">
							<h2>Importa√ß√£o de Arquivos SPED</h2>
							<p class="text-muted">
								Importe arquivos SPED para alimentar o simulador com dados reais da empresa.
							</p>
						</div>

						<div class="file-selector">
							<div class="group-box">
								<h3>Sele√ß√£o de Arquivos</h3>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label>SPED Fiscal (EFD ICMS/IPI)</label>
											<input type="file" id="sped-fiscal" accept=".txt" class="file-input" />
											<small class="text-muted"
												>Arquivo de Escritura√ß√£o Fiscal Digital ICMS/IPI</small
											>
										</div>
									</div>
									<div class="form-column">
										<div class="form-group">
											<label>SPED Contribui√ß√µes (EFD PIS/COFINS)</label>
											<input
												type="file"
												id="sped-contribuicoes"
												accept=".txt"
												class="file-input" />
											<small class="text-muted"
												>Arquivo de Escritura√ß√£o Fiscal Digital PIS/COFINS</small
											>
										</div>
									</div>
								</div>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label>ECF (Escritura√ß√£o Cont√°bil Fiscal)</label>
											<input type="file" id="sped-ecf" accept=".txt" class="file-input" />
											<small class="text-muted">Arquivo de Escritura√ß√£o Cont√°bil Fiscal</small>
										</div>
									</div>
									<div class="form-column">
										<div class="form-group">
											<label>ECD (Escritura√ß√£o Cont√°bil Digital)</label>
											<input type="file" id="sped-ecd" accept=".txt" class="file-input" />
											<small class="text-muted">Arquivo de Escritura√ß√£o Cont√°bil Digital</small>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="import-options">
							<div class="group-box">
								<h3>Op√ß√µes de Importa√ß√£o</h3>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group checkbox-group">
											<input type="checkbox" id="import-empresa" checked />
											<label for="import-empresa">Dados da Empresa</label>
										</div>
										<div class="form-group checkbox-group">
											<input type="checkbox" id="import-produtos" checked />
											<label for="import-produtos">Produtos/Servi√ßos</label>
										</div>
									</div>
									<div class="form-column">
										<div class="form-group checkbox-group">
											<input type="checkbox" id="import-impostos" checked />
											<label for="import-impostos">Impostos e Al√≠quotas</label>
										</div>
										<div class="form-group checkbox-group">
											<input type="checkbox" id="import-ciclo" checked />
											<label for="import-ciclo">Ciclo Financeiro</label>
										</div>
									</div>
								</div>
								<div class="form-row">
									<div class="form-column">
										<div class="form-group">
											<label for="periodo-referencia">Per√≠odo de Refer√™ncia:</label>
											<select id="periodo-referencia" class="form-control">
												<option value="">√öltimo per√≠odo dispon√≠vel</option>
												<option value="ultimo-trimestre">√öltimo trimestre</option>
												<option value="ultimo-semestre">√öltimo semestre</option>
												<option value="ultimo-ano">√öltimo ano fiscal</option>
											</select>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="button-group" style="margin-top: 20px">
							<button id="btn-importar-sped" class="btn-primary">Importar Dados</button>
							<button id="btn-cancelar-importacao" class="btn-secondary">Cancelar</button>
						</div>

						<div class="import-log-container">
							<div class="group-box">
								<h3>Log de Importa√ß√£o Detalhado</h3>
								<div class="log-controls">
									<button
										type="button"
										class="btn btn-sm btn-outline"
										onclick="limparLogImportacao()">
										Limpar Log
									</button>
									<button
										type="button"
										class="btn btn-sm btn-outline"
										onclick="exportarLogImportacao()">
										Exportar Log
									</button>
									<div class="log-filters">
										<label> <input type="checkbox" id="filtro-info" checked /> Info </label>
										<label> <input type="checkbox" id="filtro-warning" checked /> Avisos </label>
										<label> <input type="checkbox" id="filtro-error" checked /> Erros </label>
										<label> <input type="checkbox" id="filtro-success" checked /> Sucesso </label>
									</div>
								</div>
								<div
									id="import-log"
									class="log-area"
									style="
										height: 300px;
										overflow-y: auto;
										background-color: #f8f9fa;
										padding: 15px;
										border: 1px solid #ddd;
										border-radius: 4px;
										font-family: &quot;Courier New&quot;, monospace;
										font-size: 12px;
										line-height: 1.4;
									">
									<p class="text-muted">
										Selecione os arquivos SPED e clique em "Importar Dados" para iniciar o processo.
									</p>
								</div>
								<div class="log-statistics" id="log-statistics" style="display: none">
									<div class="stats-grid">
										<div class="stat-item">
											<span class="stat-label">Total de Eventos:</span>
											<span class="stat-value" id="stat-total">0</span>
										</div>
										<div class="stat-item">
											<span class="stat-label">Sucessos:</span>
											<span class="stat-value success" id="stat-success">0</span>
										</div>
										<div class="stat-item">
											<span class="stat-label">Avisos:</span>
											<span class="stat-value warning" id="stat-warnings">0</span>
										</div>
										<div class="stat-item">
											<span class="stat-label">Erros:</span>
											<span class="stat-value error" id="stat-errors">0</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="footer">
				<div class="copyright">&copy; 2025 Expertzy Intelig√™ncia Tribut√°ria</div>
				<div class="footer-contact">
					D√∫vidas, erros ou sugest√µes? Entre em contato:
					<a href="mailto:contato@expertzy.com.br">contato@expertzy.com.br</a>
				</div>
			</div>

		<!-- Modal de confirma√ß√£o de exclus√£o -->
		<div id="modal-confirmar-exclusao" class="modal">
			<div class="modal-content" style="max-width: 400px">
				<div class="modal-header">
					<h3>Confirmar Exclus√£o</h3>
					<span class="close">&times;</span>
				</div>
				<div class="modal-body">
					<p>Tem certeza que deseja excluir o setor <span id="nome-setor-exclusao"></span>?</p>
					<p>Esta a√ß√£o n√£o pode ser desfeita.</p>
				</div>
				<div class="modal-footer">
					<button id="btn-confirmar-exclusao" class="primary">Sim, Excluir</button>
					<button id="btn-cancelar-exclusao" class="secondary">Cancelar</button>
				</div>
			</div>
		</div>

		<!-- Modal para ajuda contextual -->
		<div id="modal-ajuda" class="modal">
			<div class="modal-content">
				<div class="modal-header">
					<h3 id="modal-ajuda-titulo">Ajuda</h3>
					<span class="close">&times;</span>
				</div>
				<div id="modal-ajuda-conteudo">
					<!-- Conte√∫do din√¢mico da ajuda -->
				</div>
			</div>
		</div>

		<!-- Importa√ß√£o dos scripts JavaScript -->

		<!-- Ordem correta dos scripts para resolver os problemas de importa√ß√£o SPED -->

		<!-- 1. PRIMEIRO: Utilit√°rios b√°sicos e formatadores -->
		<script src="js/utils/formatters.js"></script>
		<script src="js/utils/validators.js"></script>
		<script src="js/utils/data-manager.js"></script>
		<script src="js/utils/currency-formatter.js"></script>

		<!-- 2. SEGUNDO: M√≥dulo de cr√©ditos tribut√°rios (NOVO - deve ser adicionado) -->
		<script src="js/utils/creditos-tributarios.js"></script>

		<!-- 3. TERCEIRO: Reposit√≥rios e configura√ß√µes -->
		<script src="js/config/setores-repository.js"></script>
		<script src="js/repository/simulador-repository.js"></script>
		<script src="js/config/configuracoes-setoriais.js"></script>
		<script src="js/config/setores-manager.js"></script>
		<script src="js/config/config-manager.js"></script>

		<!-- 4. QUARTO: Gerenciadores de UI -->
		<script src="js/ui/tabs-manager.js"></script>
		<script src="js/ui/forms-manager.js"></script>
		<script src="js/ui/charts-manager.js"></script>
		<script src="js/ui/modal-manager.js"></script>
		<script src="js/ui/setores-ui.js"></script>
		
		<!-- Script de melhorias UI modernas -->
		<script src="js/ui/modern-ui-enhancements.js"></script>		
		<script src = "js/ui/advanced-interactions.js"></script>
		<script src = "js/ui/theme-system.js"></script>
		<script src = "js/charts/enhanced-charts.js"></script>
		<script src = "js/ui/dashboard-system.js"></script>
		<script src = "js/ui/system-orchestrator.js"></script>

		<!-- 5. QUINTO: Scripts SPED (CORRIGIDOS) -->
		<!-- IMPORTANTE: Substituir o sped-parser.js atual pelo corrigido -->
		<script src="js/importador/sped-parser.js"></script>
		<script src="js/importador/sped-extractor.js"></script>
		<script src="js/importador/sped-processor.js"></script>
		<script src="js/importador/importacao-controller.js"></script>
		<script src="js/importador/sped-validation-module.js"></script>

		<!-- 6. SEXTO: M√≥dulos de c√°lculo -->
		<script src="js/simulation/calculation-core.js"></script>
		<script src="js/simulation/current-tax-system.js"></script>
		<script src="js/simulation/iva-dual-system.js"></script>

		<!-- 7. S√âTIMO: Controladores -->
		<script src="js/ui/simulacao-controller.js"></script>
		<script src="js/ui/memoria-controller.js"></script>
		<script src="js/ui/estrategias-controller.js"></script>

		<!-- 8. OITAVO: Simula√ß√£o principal -->
		<script src="js/simulation/simulator.js"></script>
		<script src="js/simulation/strategies.js"></script>

		<!-- 9. NONO: Utilit√°rios de exporta√ß√£o -->
		<script src="js/utils/export-core.js"></script>
		<script src="js/utils/document-exporters.js"></script>
		<script src="js/utils/export-tools.js"></script>

		<!-- 10. D√âCIMO: Integra√ß√£o e main -->
		<script src="js/integration.js"></script>
		<script src="js/main.js"></script>

		<!-- ===== SCRIPTS DE INICIALIZA√á√ÉO ===== -->
		<script>
		// Aplicar √≠cones aos group-box via data attributes
		document.addEventListener('DOMContentLoaded', function() {
			document.querySelectorAll('.group-box[data-icon]').forEach(box => {
				const icon = box.getAttribute('data-icon');
				const h3 = box.querySelector('h3');
				if (h3 && icon) {
					h3.innerHTML = `${icon} ${h3.textContent}`;
				}
			});

			// Adicionar classes para anima√ß√µes
			document.querySelectorAll('.group-box').forEach((box, index) => {
				box.style.animationDelay = `${index * 150}ms`;
				box.classList.add('animate-slide-up');
			});
		});
		</script>
		
		<!-- Script direto para atualiza√ß√£o dos campos -->
		<script>
			// Fun√ß√£o para mostrar os resultados
			function mostrarResultados() {
				const resultsSection = document.getElementById("results-section");
				if (resultsSection) {
					resultsSection.style.display = "block";
					// Scroll suave para os resultados
					setTimeout(() => {
						resultsSection.scrollIntoView({
							behavior: "smooth",
							block: "start"
						});
					}, 100);
				}
			}

			// Event listener para o bot√£o simular
			document.addEventListener("DOMContentLoaded", function () {
				// Evento para o bot√£o Simular
				const btnSimular = document.getElementById("btn-simular");
				if (btnSimular) {
					btnSimular.addEventListener("click", function () {
						console.log("Bot√£o Simular clicado");

						try {
							// Verificar se o simulador est√° dispon√≠vel
							if (!window.SimuladorFluxoCaixa) {
								throw new Error("Simulador n√£o inicializado corretamente");
							}

							// Verificar disponibilidade do DataManager (componente obrigat√≥rio)
							if (!window.DataManager) {
								throw new Error("DataManager n√£o dispon√≠vel. A simula√ß√£o n√£o pode continuar.");
							}

							// Obter dados usando o DataManager (estrutura aninhada)
							let dadosAninhados = window.DataManager.obterDadosDoFormulario();
							console.log("Dados obtidos do formul√°rio (estrutura aninhada):", dadosAninhados);

							// NOVA FUNCIONALIDADE: Integrar dados do SPED se dispon√≠veis
							dadosAninhados = integrarDadosSpedNaEstruturaPadrao(dadosAninhados);

							// Verificar se h√° dados do SPED e notificar
							if (dadosAninhados.dadosSpedImportados) {
								console.log("Dados do SPED detectados e integrados √† simula√ß√£o");
								adicionarNotificacaoSped();
							}

							// Se o reposit√≥rio estiver dispon√≠vel, atualizar com os novos dados
							if (typeof SimuladorRepository !== "undefined") {
								Object.keys(dadosAninhados).forEach((secao) => {
									if (dadosAninhados[secao]) {
										SimuladorRepository.atualizarSecao(secao, dadosAninhados[secao]);
									}
								});
								console.log("Reposit√≥rio atualizado com os dados do formul√°rio e SPED");
							}

							// Executar simula√ß√£o, passando os dados obtidos
							const resultado = window.SimuladorFluxoCaixa.simular(dadosAninhados);

							if (!resultado) {
								throw new Error("A simula√ß√£o n√£o retornou resultados");
							}

							// Processar resultados
							atualizarInterface(resultado);

							// **ADICIONAR AQUI:**
							mostrarPainelResultados();

							// Atualizar gr√°ficos se o ChartManager estiver dispon√≠vel
							if (
								typeof window.ChartManager !== "undefined" &&
								typeof window.ChartManager.renderizarGraficos === "function"
							) {
								window.ChartManager.renderizarGraficos(resultado);
							} else {
								console.warn("ChartManager n√£o encontrado ou fun√ß√£o renderizarGraficos indispon√≠vel");
							}
						} catch (erro) {
							console.error("Erro ao executar simula√ß√£o:", erro);
							alert("N√£o foi poss√≠vel realizar a simula√ß√£o: " + erro.message);
						}
					});
				} else {
					console.error("Bot√£o Simular n√£o encontrado no DOM");
				}

				// Evento para o bot√£o Limpar
				const btnLimpar = document.getElementById("btn-limpar");
				if (btnLimpar) {
					btnLimpar.addEventListener("click", function () {
						console.log("Bot√£o Limpar clicado");

						try {
							// 1. Limpar localStorage
							if (typeof SimuladorRepository !== "undefined") {
								// Op√ß√£o 1: Remover completamente os dados salvos
								localStorage.removeItem(SimuladorRepository.STORAGE_KEY);

								// Op√ß√£o 2: Restaurar para valores padr√£o (alternativa √† remo√ß√£o)
								const dadosPadrao = window.DataManager.obterEstruturaAninhadaPadrao();
								Object.keys(dadosPadrao).forEach((secao) => {
									SimuladorRepository.atualizarSecao(secao, dadosPadrao[secao]);
								});

								console.log("Dados do reposit√≥rio limpos");
							}

							// 2. Limpar formul√°rios
							const camposFormulario = [
								"faturamento",
								"margem",
								"tipo-empresa",
								"tipo-operacao",
								"regime",
								"aliquota-simples",
								"pmr",
								"pmp",
								"pme",
								"perc-vista",
								"cenario",
								"taxa-crescimento",
								"data-inicial",
								"data-final"
							];

							camposFormulario.forEach((id) => {
								const campo = document.getElementById(id);
								if (campo) {
									if (campo.type === "checkbox") {
										campo.checked = false;
									} else if (campo.tagName === "SELECT") {
										campo.selectedIndex = 0;
									} else {
										campo.value = "";
									}

									// Disparar evento de mudan√ßa para atualizar campos dependentes
									const event = new Event("change");
									campo.dispatchEvent(event);
								}
							});

							// 3. Redefinir valores padr√£o espec√≠ficos
							const campoFaturamento = document.getElementById("faturamento");
							if (campoFaturamento) {
								campoFaturamento.value = "R$ 0,00";
								if (campoFaturamento.dataset) campoFaturamento.dataset.rawValue = "0";
							}

							document.getElementById("margem").value = "15";
							document.getElementById("pmr").value = "30";
							document.getElementById("pmp").value = "30";
							document.getElementById("pme").value = "30";
							document.getElementById("perc-vista").value = "30";

							// 4. Atualizar campos de ciclo financeiro e outros dependentes
							const cicloFinanceiro = document.getElementById("ciclo-financeiro");
							if (cicloFinanceiro) cicloFinanceiro.value = "30";

							const percPrazo = document.getElementById("perc-prazo");
							if (percPrazo) percPrazo.value = "70%";

							// 5. Limpar √°rea de resultados
							const divResultadosDetalhados = document.getElementById("resultados-detalhados");
							if (divResultadosDetalhados) {
								divResultadosDetalhados.style.display = "none";
							}

							// 6. Limpar gr√°ficos se o ChartManager estiver dispon√≠vel
							if (
								typeof window.ChartManager !== "undefined" &&
								typeof window.ChartManager.limparGraficos === "function"
							) {
								window.ChartManager.limparGraficos();
							}

							console.log("Formul√°rios limpos com sucesso");
							alert("Os dados foram limpos. Voc√™ pode iniciar uma nova simula√ß√£o.");
						} catch (erro) {
							console.error("Erro ao limpar formul√°rios:", erro);
							alert("Ocorreu um erro ao limpar os formul√°rios: " + erro.message);
						}
					});
				} else {
					console.error("Bot√£o Limpar n√£o encontrado no DOM");
				}
			});
		</script>

		<script>
			// Fun√ß√£o para ajustar campos tribut√°rios conforme regime selecionado
			// Corre√ß√£o para fun√ß√£o calcularCreditosTributarios
			document.addEventListener("DOMContentLoaded", function () {
				console.log("Verificando disponibilidade de m√≥dulos SPED...");

				// Verificar se SpedParser foi carregado corretamente
				if (window.SpedParser) {
					console.log("‚úì SpedParser carregado com sucesso");
				} else {
					console.error("‚úó SpedParser n√£o foi carregado");
				}

				// Verificar se fun√ß√£o calcularCreditosTributarios est√° dispon√≠vel
				if (typeof window.calcularCreditosTributarios === "function") {
					console.log("‚úì calcularCreditosTributarios dispon√≠vel");
				} else {
					console.error("‚úó calcularCreditosTributarios n√£o encontrada");
				}

				// Verificar se ImportacaoController est√° dispon√≠vel
				if (window.ImportacaoController) {
					console.log("‚úì ImportacaoController dispon√≠vel");
					// Tentar inicializar
					try {
						window.ImportacaoController.inicializar();
						console.log("‚úì ImportacaoController inicializado");
					} catch (error) {
						console.error("‚úó Erro ao inicializar ImportacaoController:", error);
					}
				} else {
					console.error("‚úó ImportacaoController n√£o encontrado");
				}
			});

			// Fun√ß√£o para calcular dados financeiros
			function calcularDadosFinanceiros() {
				if (!window.DataManager) return;

				const receitaLiquida = window.DataManager.extrairValorNumerico("receita-liquida");
				const custoTotal = window.DataManager.extrairValorNumerico("custo-total");
				const despesasOperacionais = window.DataManager.extrairValorNumerico("despesas-operacionais");

				// Calcular lucro operacional
				const lucroOperacional = receitaLiquida - custoTotal - despesasOperacionais;
				const campoLucroOperacional = document.getElementById("lucro-operacional");
				if (campoLucroOperacional) {
					campoLucroOperacional.value = window.DataManager.formatarMoeda(lucroOperacional);
				}

				// Calcular margem operacional
				const margemOperacional = receitaLiquida > 0 ? (lucroOperacional / receitaLiquida) * 100 : 0;
				const campoMargemOperacional = document.getElementById("margem-operacional-calc");
				if (campoMargemOperacional) {
					campoMargemOperacional.value = margemOperacional.toFixed(2);
				}
			}

			// Fun√ß√£o para alternar uso de dados financeiros
			function toggleDadosFinanceiros() {
				const checkbox = document.getElementById("usar-dados-financeiros");
				const camposFinanceiros = document.querySelectorAll(
					"#receita-bruta, #receita-liquida, #custo-total, #despesas-operacionais"
				);

				camposFinanceiros.forEach((campo) => {
					campo.readOnly = !checkbox.checked;
					if (checkbox.checked) {
						campo.classList.remove("disabled");
					} else {
						campo.classList.add("disabled");
					}
				});

				if (checkbox.checked) {
					calcularDadosFinanceiros();
				}
			}

			// Inicializa√ß√£o quando o DOM estiver carregado
			document.addEventListener("DOMContentLoaded", function () {
				// Aplicar formata√ß√£o de moeda em campos financeiros
				if (window.CurrencyFormatter) {
					const camposFinanceiros = [
						"receita-bruta",
						"receita-liquida",
						"custo-total",
						"despesas-operacionais",
						"lucro-operacional"
					];

					camposFinanceiros.forEach((id) => {
						const campo = document.getElementById(id);
						if (campo) {
							window.CurrencyFormatter.aplicarFormatacaoMoeda(campo);
							campo.addEventListener("input", calcularDadosFinanceiros);
						}
					});
				}

				// Configurar event listeners para ajustes tribut√°rios
				const camposRelevantes = ["regime", "tipo-empresa", "tipo-operacao"];

				camposRelevantes.forEach(function (id) {
					const campo = document.getElementById(id);
					if (campo) {
						campo.addEventListener("change", function () {
							if (id === "regime") {
								ajustarCamposTributarios();
							} else {
								ajustarCamposOperacao();
							}
						});
					}
				});

				// Inicializar TabsManager
				if (window.TabsManager && typeof window.TabsManager.inicializar === "function") {
					window.TabsManager.inicializar();
				}

				// Inicializar ImportacaoController
				if (window.ImportacaoController && typeof window.ImportacaoController.inicializar === "function") {
					window.ImportacaoController.inicializar();
				}

				// Configura√ß√£o inicial dos campos
				ajustarCamposTributarios();
				ajustarCamposOperacao();

				console.log("Sistema de Simula√ß√£o Split Payment inicializado com nova arquitetura");
			});

			// Controle do modal de aviso de cache
			document.addEventListener("DOMContentLoaded", function () {
				const cacheAlert = document.getElementById("cache-alert");
				const closeButton = document.getElementById("close-cache-alert");
				const proceedButton = document.getElementById("proceed-button");

				// Verificar se o usu√°rio j√° viu o aviso na sess√£o atual
				const alertShown = sessionStorage.getItem("cacheAlertShown");

				if (!alertShown) {
					cacheAlert.style.display = "flex";
				} else {
					cacheAlert.style.display = "none";
				}

				// Fun√ß√£o para fechar o modal
				function closeAlert() {
					cacheAlert.style.display = "none";
					sessionStorage.setItem("cacheAlertShown", "true");
				}

				// Eventos para fechar o modal
				closeButton.addEventListener("click", closeAlert);
				proceedButton.addEventListener("click", closeAlert);

				// Fechar modal ao clicar fora da caixa
				cacheAlert.addEventListener("click", function (event) {
					if (event.target === cacheAlert) {
						closeAlert();
					}
				});
			});

			// Fun√ß√µes para controle do log de importa√ß√£o
			function limparLogImportacao() {
				const logArea = document.getElementById("import-log");
				if (logArea) {
					logArea.innerHTML = '<p class="text-muted">Log limpo pelo usu√°rio.</p>';
				}

				// Resetar estat√≠sticas
				const stats = ["stat-total", "stat-success", "stat-warnings", "stat-errors"];
				stats.forEach((id) => {
					const element = document.getElementById(id);
					if (element) element.textContent = "0";
				});
			}

			function exportarLogImportacao() {
				const logArea = document.getElementById("import-log");
				if (!logArea) return;

				const logContent = logArea.innerText || logArea.textContent;
				const blob = new Blob([logContent], { type: "text/plain" });
				const url = window.URL.createObjectURL(blob);

				const a = document.createElement("a");
				a.href = url;
				a.download = `log-importacao-sped-${new Date().toISOString().slice(0, 10)}.txt`;
				document.body.appendChild(a);
				a.click();
				document.body.removeChild(a);
				window.URL.revokeObjectURL(url);
			}

			// Fun√ß√£o global para exibir detalhes da importa√ß√£o
			window.exibirDetalhesImportacao = function () {
				if (!window.dadosImportadosSped) {
					alert("Nenhum dado SPED foi importado ainda.");
					return;
				}

				// Criar modal com detalhes da importa√ß√£o
				const modal = document.createElement("div");
				modal.className = "modal-backdrop";
				modal.innerHTML = `
			<div class="modal">
				<div class="modal-header">
					<h3>Detalhes da Importa√ß√£o SPED</h3>
					<button type="button" class="modal-close" onclick="this.closest('.modal-backdrop').remove()">&times;</button>
				</div>
				<div class="modal-body">
					<h4>Dados da Empresa:</h4>
					<p><strong>Raz√£o Social:</strong> ${window.dadosImportadosSped.empresa?.razaoSocial || "N/A"}</p>
					<p><strong>CNPJ:</strong> ${window.dadosImportadosSped.empresa?.cnpj || "N/A"}</p>
					<p><strong>Faturamento:</strong> ${window.DataManager.formatarMoeda(window.dadosImportadosSped.empresa?.faturamento || 0)}</p>

					<h4>Composi√ß√£o Tribut√°ria:</h4>
					<p><strong>Al√≠quota Efetiva Total:</strong> ${((window.dadosImportadosSped.parametrosFiscais?.aliquota || 0) * 100).toFixed(2)}%</p>

					<h4>Metadados:</h4>
					<p><strong>Fonte:</strong> ${window.dadosImportadosSped.metadados?.fonteDados || "Manual"}</p>
					<p><strong>Data de Importa√ß√£o:</strong> ${window.dadosImportadosSped.metadados?.timestampImportacao || "N/A"}</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" onclick="this.closest('.modal-backdrop').remove()">Fechar</button>
				</div>
			</div>
		`;

				document.body.appendChild(modal);
			};
		</script>
		<script>
			document.addEventListener("DOMContentLoaded", function () {
				// Adicionar event listeners para campos que afetam a exibi√ß√£o dos impostos
				const camposRelevantes = ["regime", "tipo-empresa", "tipo-operacao"];

				camposRelevantes.forEach(function (id) {
					const campo = document.getElementById(id);
					if (campo) {
						campo.addEventListener("change", function () {
							console.log(`Campo ${id} alterado para: ${this.value}`);

							if (id === "regime") {
								ajustarCamposTributarios();
							} else {
								ajustarCamposOperacao();
							}
						});
					} else {
						console.warn(`Campo #${id} n√£o encontrado`);
					}
				});

				// Inicializar campos
				ajustarCamposTributarios();

				// Financial Cycle Calculation
				function calcularCicloFinanceiro() {
					const pmr = parseInt(document.getElementById("pmr")?.value) || 0;
					const pmp = parseInt(document.getElementById("pmp")?.value) || 0;
					const pme = parseInt(document.getElementById("pme")?.value) || 0;

					const ciclo = pmr + pme - pmp;
					const campoCiclo = document.getElementById("ciclo-financeiro");
					if (campoCiclo) {
						campoCiclo.value = ciclo;
					}
				}

				["pmr", "pmp", "pme"].forEach((id) => {
					const campo = document.getElementById(id);
					if (campo) {
						campo.addEventListener("input", calcularCicloFinanceiro);
					}
				});

				calcularCicloFinanceiro();

				// Credit Sales Percentage Update
				function atualizarPercPrazo() {
					const campoPercVista = document.getElementById("perc-vista");
					const campoPercPrazo = document.getElementById("perc-prazo");

					if (campoPercVista && campoPercPrazo) {
						const valorPercVista = parseFloat(campoPercVista.value) || 0;
						const valorPercPrazo = Math.max(0, Math.min(100, 100 - valorPercVista));

						campoPercPrazo.value = valorPercPrazo.toFixed(1) + "%";
					}
				}

				const campoPercVista = document.getElementById("perc-vista");
				if (campoPercVista) {
					campoPercVista.addEventListener("input", atualizarPercPrazo);
					campoPercVista.addEventListener("blur", atualizarPercPrazo);
				}

				atualizarPercPrazo();

				// Adicionar listeners para campos de cr√©ditos tribut√°rios
				const camposTributarios = [
					"faturamento",
					"pis-cofins-base-calc",
					"pis-cofins-perc-credito",
					"icms-base-calc",
					"icms-perc-credito",
					"aliquota-icms",
					"ipi-base-calc",
					"ipi-perc-credito",
					"aliquota-ipi"
				];

				camposTributarios.forEach(function (id) {
					const campo = document.getElementById(id);
					if (campo) {
						campo.addEventListener("input", calcularCreditosTributarios);
						campo.addEventListener("change", calcularCreditosTributarios);
					}
				});

				// Configura√ß√£o inicial
				ajustarAliquotasPisCofins();
				calcularCreditosTributarios();

				// Adicionar event listener para o tipo de empresa
				const campoTipoEmpresa = document.getElementById("tipo-empresa");
				if (campoTipoEmpresa) {
					campoTipoEmpresa.addEventListener("change", function () {
						ajustarCamposOperacao();
					});
				}

				// Adicionar event listener para o tipo de opera√ß√£o
				const campoTipoOperacao = document.getElementById("tipo-operacao");
				if (campoTipoOperacao) {
					campoTipoOperacao.addEventListener("change", function () {
						ajustarCamposOperacao();
					});
				}

				// Inicializar os campos
				ajustarCamposTributarios();
				ajustarCamposOperacao();
			});
		</script>

		<!-- Adicionar manualmente no HTML usando Inspect Element ou Console do navegador -->
		<script>
			(function () {
				// Fun√ß√£o para verificar e criar elementos ausentes
				function verificarECriarElementos() {
					const containerGraficos = document.querySelector(".charts-grid");
					if (!containerGraficos) {
						const containerResultados = document.querySelector(".simulation-results");
						if (containerResultados) {
							const novoContainer = document.createElement("div");
							novoContainer.className = "charts-grid";
							containerResultados.appendChild(novoContainer);
							console.log("Container de gr√°ficos criado");
						}
						return;
					}

					// Transformar em grid se ainda n√£o for
					containerGraficos.className = "charts-grid";

					// Verificar elementos de gr√°ficos
					const graficos = [
						"grafico-fluxo-caixa",
						"grafico-capital-giro",
						"grafico-projecao",
						"grafico-decomposicao",
						"grafico-sensibilidade"
					];

					graficos.forEach((id) => {
						if (!document.getElementById(id)) {
							const container = document.createElement("div");
							container.className = "chart-container";

							const canvas = document.createElement("canvas");
							canvas.id = id;

							container.appendChild(canvas);
							containerGraficos.appendChild(container);

							console.log(`Elemento criado: ${id}`);
						}
					});
				}

				// Adicionar CSS cr√≠tico
				function adicionarCSS() {
					const style = document.createElement("style");
					style.textContent = `
				.charts-grid {
					display: grid;
					grid-template-columns: repeat(2, 1fr);
					gap: 20px;
				}
				
				.chart-container {
					min-height: 250px;
					position: relative;
				}
				
				.result-card {
					background-color: #fff;
					padding: 15px;
					border-radius: 5px;
					box-shadow: 0 1px 3px rgba(0,0,0,0.1);
					margin-bottom: 20px;
				}
				
				.action-buttons-container {
					display: flex;
					gap: 15px;
					margin-top: 20px;
					margin-bottom: 30px;
				}
				
				.btn-primary {
					background-color: #0056b3;
					color: white;
					border: none;
					border-radius: 4px;
					padding: 10px 20px;
					cursor: pointer;
				}
				
				.btn-secondary {
					background-color: #6c757d;
					color: white;
					border: none;
					border-radius: 4px;
					padding: 10px 20px;
					cursor: pointer;
				}
				
				.alert {
					padding: 15px;
					border-radius: 4px;
					margin-bottom: 20px;
				}
				
				.alert-warning {
					background-color: #fff3cd;
					border: 1px solid #ffeeba;
					color: #856404;
				}
			`;
					document.head.appendChild(style);
				}

				// Executar quando o DOM estiver pronto
				if (document.readyState === "loading") {
					document.addEventListener("DOMContentLoaded", function () {
						verificarECriarElementos();
						adicionarCSS();
					});
				} else {
					verificarECriarElementos();
					adicionarCSS();
				}
			})();

			document.addEventListener("DOMContentLoaded", function () {
				TabsManager.inicializar();
			});

			// Controle do modal de aviso de cache
			document.addEventListener("DOMContentLoaded", function () {
				const cacheAlert = document.getElementById("cache-alert");
				const closeButton = document.getElementById("close-cache-alert");
				const proceedButton = document.getElementById("proceed-button");

				// Verificar se o usu√°rio j√° viu o aviso na sess√£o atual
				const alertShown = sessionStorage.getItem("cacheAlertShown");

				if (!alertShown) {
					cacheAlert.style.display = "flex";
				} else {
					cacheAlert.style.display = "none";
				}

				// Fun√ß√£o para fechar o modal
				function closeAlert() {
					cacheAlert.style.display = "none";
					// Marcar que o usu√°rio j√° viu o aviso nesta sess√£o
					sessionStorage.setItem("cacheAlertShown", "true");
				}

				// Eventos para fechar o modal
				closeButton.addEventListener("click", closeAlert);
				proceedButton.addEventListener("click", closeAlert);

				// Fechar modal ao clicar fora da caixa (opcional)
				cacheAlert.addEventListener("click", function (event) {
					if (event.target === cacheAlert) {
						closeAlert();
					}
				});
			});
		</script>
	</body>
</html>
